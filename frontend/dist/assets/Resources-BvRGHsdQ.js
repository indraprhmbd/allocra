import{c as T,d as V,g as U,a as E,b as e,j as i,u as y,k as $,x as u,y as b,w as c,m as n,o as C,t as M,z as R,f as j,A as D,B as z,C as B}from"./index-C2XaiYtm.js";import{I as F,a as H,M as L,_ as O}from"./ModalBase-BZKfmC9n.js";import{_ as q}from"./DataTable.vue_vue_type_script_setup_true_lang-CEe1Cpmc.js";import{a as f}from"./api-Ca2zvfGq.js";var G=T("outline","adjustments-horizontal","AdjustmentsHorizontal",[["path",{d:"M12 6a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M6 12a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M15 18a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);const X={class:"space-y-6"},P={class:"flex flex-col md:flex-row md:items-end justify-between gap-4"},Q={class:"flex flex-col md:flex-row items-stretch md:items-center gap-4"},Y={class:"relative flex-1 group"},J={class:"border border-border p-2 rounded-sm text-muted hover:text-primary hover:border-muted transition-colors flex justify-center"},K={class:"bg-surface border border-border rounded-sm overflow-hidden"},W={class:"overflow-x-auto"},Z={class:"text-xs uppercase tracking-wide px-2 py-0.5 border border-border bg-background/50 rounded-full font-mono"},ee={class:"flex items-center justify-end gap-3"},te=["onClick"],se=["onClick"],oe={class:"space-y-2"},ae={class:"grid grid-cols-2 gap-4"},re={class:"space-y-2"},ne={class:"space-y-2"},le={key:0,class:"space-y-2"},me=V({__name:"Resources",setup(ie){const{toast:l}=z(),v=n(!1),r=n(!1),d=n(null),I=B(()=>d.value!==null),g=n(""),x=n(!1),_=[{key:"name",label:"Identifier",class:"font-mono"},{key:"capacity",label:"Capacity",class:"text-right w-32"},{key:"type",label:"Access Type",class:"w-40"},{key:"status",label:"Status",class:"w-40"},{key:"actions",label:"",class:"w-20 text-right"}],w=n([]),a=n({name:"",capacity:0,type:"shared",status:"online"}),N=o=>{d.value=o.id,a.value={name:o.name,capacity:o.capacity,type:o.type,status:o.status},r.value=!0},p=()=>{v.value=!1,r.value=!1,d.value=null,a.value={name:"",capacity:0,type:"shared",status:"online"}},m=async()=>{x.value=!0;try{const o=await f.get("/rooms");w.value=o.data}catch{console.error("Failed to fetch resources")}finally{x.value=!1}},A=async o=>{if(confirm("Are you sure you want to decommission this resource?"))try{await f.delete(`/rooms/${o}`),l("Resource successfully decommissioned","success"),m()}catch{l("Decommissioning failed","error")}},k=async()=>{if(d.value)try{await f.put(`/rooms/${d.value}`,a.value),p(),l("Resource updated successfully","success"),m()}catch{l("Update failed","error")}},h=async()=>{try{await f.post("/rooms",a.value),p(),l("Resource registered successfully","success"),m()}catch{l("Registration failed","error")}};return U(()=>{m()}),(o,t)=>(C(),E("div",X,[e("div",P,[t[9]||(t[9]=e("div",null,[e("h2",{class:"text-2xl font-bold text-primary tracking-tight"}," Resource Management "),e("p",{class:"text-muted text-sm mt-1"}," Configure and monitor available system resources and nodes. ")],-1)),e("button",{onClick:t[0]||(t[0]=s=>v.value=!0),class:"bg-accent hover:bg-accent-hover text-white text-xs font-bold uppercase tracking-widest px-4 py-2 rounded-sm transition-colors flex items-center justify-center gap-2 w-full md:w-auto"},[i(y(F),{size:16}),t[8]||(t[8]=$(" REGISTER_RESOURCE ",-1))])]),e("div",Q,[e("div",Y,[i(y(H),{size:16,class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted group-focus-within:text-accent transition-colors"}),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),type:"text",placeholder:"SEARCH_BY_IDENTIFIER...",class:"w-full bg-surface border border-border rounded-sm pl-10 pr-4 py-2 text-xs font-mono text-primary placeholder:text-muted focus:outline-none focus:border-accent/50 transition-colors"},null,512),[[b,g.value]])]),e("button",J,[i(y(G),{size:18})])]),e("div",K,[e("div",W,[i(q,{columns:_,items:w.value,loading:x.value},{type:c(({value:s})=>[e("span",Z,M(s),1)]),status:c(({value:s})=>[i(O,{status:s,variant:s==="online"?"success":s==="maintenance"?"warning":"error"},null,8,["status","variant"])]),actions:c(({item:s})=>[e("div",ee,[e("button",{onClick:S=>N(s),class:"text-[10px] font-mono text-muted hover:text-primary transition-colors"}," EDIT ",8,te),e("button",{onClick:S=>A(s.id),class:"text-[10px] font-mono text-red-400/70 hover:text-red-400 transition-colors"}," DELETE ",8,se)])]),_:1},8,["items","loading"])])]),i(L,{show:v.value||r.value,title:r.value?"Update Resource":"Register New Resource",onClose:p},{actions:c(()=>[e("button",{type:"button",onClick:p,class:"text-xs font-bold font-mono text-muted hover:text-primary px-4 py-2 transition-colors"}," CANCEL "),e("button",{type:"button",onClick:t[7]||(t[7]=s=>r.value?k():h()),class:"bg-accent hover:bg-accent-hover text-white text-xs font-bold uppercase tracking-widest px-6 py-2 rounded-sm transition-colors"},M(r.value?"SAVE_CHANGES":"SUBMIT_REGISTRATION"),1)]),default:c(()=>[e("form",{class:"space-y-6",onSubmit:t[6]||(t[6]=D(s=>I.value?k():h(),["prevent"]))},[e("div",oe,[t[10]||(t[10]=e("label",{class:"text-[10px] font-mono text-muted uppercase tracking-widest"},"Resource Identifier",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.name=s),type:"text",required:"",class:"w-full bg-background border border-border rounded-sm p-3 text-sm text-primary focus:outline-none focus:border-accent",placeholder:"e.g. NODE-AX-05"},null,512),[[b,a.value.name]])]),e("div",ae,[e("div",re,[t[11]||(t[11]=e("label",{class:"text-[10px] font-mono text-muted uppercase tracking-widest"},"Capacity Units",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.capacity=s),type:"number",required:"",min:"1",class:"w-full bg-background border border-border rounded-sm p-3 text-sm text-primary focus:outline-none focus:border-accent",placeholder:"0"},null,512),[[b,a.value.capacity,void 0,{number:!0}]])]),e("div",ne,[t[13]||(t[13]=e("label",{class:"text-[10px] font-mono text-muted uppercase tracking-widest"},"Access Mode",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.type=s),class:"w-full bg-background border border-border rounded-sm p-3 text-sm text-primary focus:outline-none focus:border-accent"},[...t[12]||(t[12]=[e("option",{value:"shared"},"SHARED",-1),e("option",{value:"exclusive"},"EXCLUSIVE",-1)])],512),[[R,a.value.type]])])]),r.value?(C(),E("div",le,[t[15]||(t[15]=e("label",{class:"text-[10px] font-mono text-muted uppercase tracking-widest"},"Status",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.status=s),class:"w-full bg-background border border-border rounded-sm p-3 text-sm text-primary focus:outline-none focus:border-accent"},[...t[14]||(t[14]=[e("option",{value:"online"},"ONLINE",-1),e("option",{value:"maintenance"},"MAINTENANCE",-1),e("option",{value:"offline"},"OFFLINE",-1)])],512),[[R,a.value.status]])])):j("",!0),t[16]||(t[16]=e("div",{class:"bg-accent/5 border border-accent/20 p-4 rounded-sm"},[e("p",{class:"text-[10px] text-accent font-medium leading-relaxed uppercase"}," Note: Exclusive access resources can only serve one allocation at a time, regardless of requested capacity vs. total units. ")],-1))],32)]),_:1},8,["show","title"])]))}});export{me as default};
