import{c as S,d as D,g as N,a as l,b as e,h as f,u as i,G as R,i as d,H as P,t as c,s as z,v as F,n as w,e as M,E as j,f as x,w as $,J as G,l as b,o as r,F as U,j as V,_ as q}from"./index-DmJMoqH0.js";import{I as B}from"./IconAlertCircle-C42vCjmX.js";import{a as k}from"./api-Ca2zvfGq.js";var C=S("outline","dice","Dice",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14",key:"svg-0"}],["path",{d:"M8 8.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-1"}],["path",{d:"M15 8.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-2"}],["path",{d:"M15 15.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-3"}],["path",{d:"M8 15.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-4"}]]);var Y=S("outline","player-play","PlayerPlay",[["path",{d:"M7 4v16l13 -8l-13 -8",key:"svg-0"}]]);var E=S("outline","trash","Trash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);const H={class:"max-w-6xl mx-auto py-8 px-4 space-y-8"},J={class:"flex items-start justify-between"},Q={class:"space-y-1"},W={class:"text-3xl font-bold text-primary tracking-tighter flex items-center gap-3"},X={class:"flex items-center gap-4"},K={class:"w-10 h-10 rounded-sm bg-accent/10 border border-accent/20 flex items-center justify-center"},Z={class:"grid grid-cols-1 lg:grid-cols-12 gap-8"},ee={class:"lg:col-span-4 space-y-6"},te={class:"bg-surface border border-border p-6 rounded-sm space-y-6"},se={class:"text-xs font-bold text-primary uppercase tracking-widest flex items-center gap-2"},ae={class:"space-y-4"},oe={class:"space-y-2"},re={class:"flex justify-between text-[10px] font-mono text-muted uppercase"},ne={class:"text-accent"},le={class:"p-4 bg-background/50 border border-dashed border-border rounded-sm space-y-2"},ie={class:"text-[10px] text-muted font-mono leading-relaxed"},de={class:"flex items-center gap-2 bg-background p-1 border border-border rounded-sm"},ce=["disabled"],ue={class:"relative z-10 flex items-center justify-center gap-2"},pe={class:"p-4 bg-yellow-500/5 border border-yellow-500/20 rounded-sm flex gap-3"},fe={class:"lg:col-span-8 flex flex-col h-[600px]"},me={class:"bg-background border border-border rounded-sm flex flex-col h-full shadow-inner"},ge={class:"p-3 border-b border-border bg-surface/50 flex items-center justify-between"},ve={class:"flex-1 overflow-y-auto p-4 font-mono text-[11px] space-y-2 selection:bg-accent/30"},xe={key:0,class:"h-full flex items-center justify-center text-muted/30 uppercase tracking-widest italic"},be={class:"text-muted/50 shrink-0"},ye={class:"space-y-1"},he={key:0,class:"mr-1"},_e={key:1,class:"mr-1"},we={key:2,class:"mr-1"},ke={key:0,class:"text-muted/60 pl-4 border-l border-border/50 text-[10px] leading-relaxed italic"},Se={class:"p-2 border-t border-border bg-surface/30 px-4 flex justify-between items-center"},Te={class:"flex gap-4"},Me={class:"text-[9px] text-muted uppercase"},Ce=D({__name:"Playground",setup(Ee){const u=b(!1),v=b([]),m=b(5),p=b("sequential"),n=b([]),I=async()=>{try{const a=await k.get("/rooms");v.value=a.data}catch{o("error","SYSTEM","Failed to fetch resource nodes")}},o=(a,t,s,h)=>{const g={id:Math.random().toString(36).substring(7),timestamp:new Date().toLocaleTimeString(),type:a,message:`[${t}] ${s}`,details:h};n.value.unshift(g),n.value.length>50&&n.value.pop(),localStorage.setItem("playground_logs",JSON.stringify(n.value))},L=()=>{n.value=[],localStorage.removeItem("playground_logs")},O=async()=>{if(confirm("WARNING: This will delete ALL allocations. Continue?")){u.value=!0;try{await k.post("/allocations/reset"),o("info","SYSTEM","Database reset successful")}catch(a){o("error","SYSTEM","Reset failed",a.message)}finally{u.value=!1}}},T=async a=>{const t=v.value[Math.floor(Math.random()*v.value.length)],s=new Date,h=5+a*15+Math.floor(Math.random()*60);s.setMinutes(s.getMinutes()+h);const g=new Date(s);g.setHours(g.getHours()+1+Math.floor(Math.random()*2));try{const y={room_id:t.id,user_id:1,start_time:s.toISOString(),end_time:g.toISOString()};await k.post("/bookings",y),o("success",t.name,`Allocation approved for ${s.toLocaleTimeString()} - ${g.toLocaleTimeString()}`)}catch(y){const _=y.response?.data?.error||"Unknown error";y.response?.status===409||_.includes("conflict")?o("conflict",t.name,"Resource conflict detected",_):o("error",t.name,`Failed: ${_}`)}},A=async()=>{if(v.value.length===0){o("error","SYSTEM","Aborting: No resources found");return}if(u.value=!0,o("info","FLOOD",`Initiating ${p.value} batch of ${m.value} requests...`),p.value==="sequential")for(let a=0;a<m.value;a++)await T(a),await new Promise(t=>setTimeout(t,100));else{const a=Array.from({length:m.value},(t,s)=>T(s));await Promise.all(a)}o("info","FLOOD","Batch execution completed."),u.value=!1};return N(()=>{I(),o("info","SYSTEM","Playground engine initialized. REPL ready.")}),(a,t)=>(r(),l("div",H,[e("div",J,[e("div",Q,[e("h2",W,[f(i(R),{class:"text-accent"}),t[3]||(t[3]=d(" ALLOCRA_PLAYGROUND ",-1))]),t[4]||(t[4]=e("p",{class:"text-muted text-sm font-mono uppercase tracking-widest bg-accent/5 px-2 py-0.5 rounded-sm inline-block"}," Deterministic_Stress_Testing_Unit_v2 ",-1))]),e("div",X,[t[5]||(t[5]=e("div",{class:"text-right"},[e("p",{class:"text-[10px] font-mono text-muted uppercase"}," Engine_Status "),e("p",{class:"text-green-500 font-bold font-mono"},"NOMINAL")],-1)),e("div",K,[f(i(P),{class:"text-accent"})])])]),e("div",Z,[e("div",ee,[e("div",te,[e("h3",se,[f(i(C),{size:14}),t[6]||(t[6]=d(" Simulation_Parameters ",-1))]),e("div",ae,[e("div",oe,[e("div",re,[t[7]||(t[7]=e("span",null,"Request_Flood_Level",-1)),e("span",ne,c(m.value)+" REQS",1)]),z(e("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),min:"1",max:"50",class:"w-full accent-accent bg-background h-1.5 rounded-full appearance-none border border-border"},null,512),[[F,m.value,void 0,{number:!0}]])]),e("div",le,[e("p",ie,[d(" > TARGET: "+c(v.value.length)+" NODES ACTIVE",1),t[8]||(t[8]=e("br",null,null,-1)),t[9]||(t[9]=d(" > STRATEGY: STOCHASTIC_TIME_SLOTS",-1)),t[10]||(t[10]=e("br",null,null,-1)),d(" > MODE: "+c(p.value.toUpperCase())+"_TRACE ",1)])]),e("div",de,[e("button",{onClick:t[1]||(t[1]=s=>p.value="sequential"),class:w(["flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-sm transition-colors",p.value==="sequential"?"bg-accent text-white shadow-sm":"text-muted hover:text-primary"])}," Sequential ",2),e("button",{onClick:t[2]||(t[2]=s=>p.value="parallel"),class:w(["flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-sm transition-colors",p.value==="parallel"?"bg-accent text-white shadow-sm":"text-muted hover:text-primary"])}," Parallel ",2)])]),e("button",{onClick:A,disabled:u.value,class:"w-full relative group bg-accent hover:bg-accent-hover text-white text-xs font-bold uppercase tracking-[0.2em] py-4 rounded-sm transition-all disabled:opacity-50 overflow-hidden"},[t[11]||(t[11]=e("div",{class:"absolute inset-0 bg-white/10 -translate-x-full group-hover:translate-x-0 transition-transform duration-500"},null,-1)),e("span",ue,[u.value?(r(),M(i(C),{key:1,size:16,class:"animate-spin"})):(r(),M(i(Y),{key:0,size:16})),d(" "+c(u.value?"EXECUTING_STORM...":"INITIATE_FLOOD"),1)])],8,ce)]),e("div",pe,[f(i(B),{size:16,class:"text-yellow-500 shrink-0 mt-0.5"}),t[12]||(t[12]=e("p",{class:"text-[10px] text-muted leading-relaxed"}," CAUTION: FLOOD_MODE generates real database entries. High volume may affect timeline visualization performance. ",-1))]),e("button",{onClick:O,class:"w-full border border-red-500/30 hover:bg-red-500/10 text-red-500 text-xs font-bold uppercase tracking-widest py-3 rounded-sm transition-colors flex items-center justify-center gap-2"},[f(i(E),{size:14}),t[13]||(t[13]=d(" PURGE_DATABASE ",-1))])]),e("div",fe,[e("div",me,[e("div",ge,[t[14]||(t[14]=j('<div class="flex items-center gap-2" data-v-4fca89e1><div class="flex gap-1" data-v-4fca89e1><div class="w-2.5 h-2.5 rounded-full bg-red-500/50" data-v-4fca89e1></div><div class="w-2.5 h-2.5 rounded-full bg-yellow-500/50" data-v-4fca89e1></div><div class="w-2.5 h-2.5 rounded-full bg-green-500/50" data-v-4fca89e1></div></div><span class="text-[10px] font-mono font-bold text-muted ml-4 uppercase tracking-widest" data-v-4fca89e1>Live_Engine_Tracer</span></div>',1)),e("button",{onClick:L,class:"text-muted hover:text-red-400 transition-colors",title:"Clear Logs"},[f(i(E),{size:14})])]),e("div",ve,[n.value.length===0?(r(),l("div",xe," Awaiting_Input... ")):x("",!0),f(G,{name:"log"},{default:$(()=>[(r(!0),l(U,null,V(n.value,s=>(r(),l("div",{key:s.id,class:"flex gap-3 group animate-in slide-in-from-left-1 duration-200"},[e("span",be,c(s.timestamp),1),e("div",ye,[e("div",{class:w({"text-green-400":s.type==="success","text-red-400":s.type==="conflict","text-accent":s.type==="info","text-red-500 font-bold":s.type==="error"})},[s.type==="success"?(r(),l("span",he,"✓")):x("",!0),s.type==="conflict"?(r(),l("span",_e,"⚠")):x("",!0),s.type==="error"?(r(),l("span",we,"❌")):x("",!0),d(" "+c(s.message),1)],2),s.details?(r(),l("div",ke,c(s.details),1)):x("",!0)])]))),128))]),_:1})]),e("div",Se,[e("div",Te,[e("span",Me,"Trace_Buffer: "+c(n.value.length)+"/50",1)]),t[15]||(t[15]=e("div",{class:"flex items-center gap-1.5 animate-pulse"},[e("div",{class:"w-1.5 h-1.5 rounded-full bg-accent"}),e("span",{class:"text-[9px] text-accent uppercase font-bold tracking-tighter"},"Engine_Listening")],-1))])])])])]))}}),De=q(Ce,[["__scopeId","data-v-4fca89e1"]]);export{De as default};
