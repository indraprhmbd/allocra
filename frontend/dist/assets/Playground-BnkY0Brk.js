import{c as S,d as D,g as N,a as l,b as e,j as g,u,J as R,k as p,t as i,x as P,y as z,n as w,e as M,h as F,f as x,w as j,K as $,m as b,o as r,F as U,i as V,_ as q}from"./index-CE_jnT5K.js";import{I as B}from"./IconAlertCircle-BMTqImMW.js";import{a as k}from"./api-Ca2zvfGq.js";var C=S("outline","dice","Dice",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14",key:"svg-0"}],["path",{d:"M8 8.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-1"}],["path",{d:"M15 8.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-2"}],["path",{d:"M15 15.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-3"}],["path",{d:"M8 15.5a.5 .5 0 1 0 1 0a.5 .5 0 1 0 -1 0",fill:"currentColor",key:"svg-4"}]]);var G=S("outline","player-play","PlayerPlay",[["path",{d:"M7 4v16l13 -8l-13 -8",key:"svg-0"}]]);var E=S("outline","trash","Trash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);const Y={class:"max-w-6xl mx-auto h-[calc(100vh-9rem)] md:h-auto flex flex-col py-2 md:py-8 px-0 md:px-4 space-y-4 md:space-y-8"},H={class:"flex-none flex flex-col md:flex-row md:items-start justify-between gap-4 px-2 md:px-0"},J={class:"flex items-center gap-4 self-end md:self-auto"},X={class:"w-10 h-10 rounded-sm bg-accent/10 border border-accent/20 flex items-center justify-center"},K={class:"flex-1 flex flex-col lg:grid lg:grid-cols-12 gap-4 md:gap-8 min-h-0"},Q={class:"flex-none lg:col-span-4 space-y-6 overflow-y-auto md:overflow-visible max-h-[30vh] md:max-h-none px-2 md:px-0"},W={class:"bg-surface border border-border p-4 md:p-6 rounded-sm space-y-6"},Z={class:"text-xs font-bold text-primary uppercase tracking-widest flex items-center gap-2"},ee={class:"space-y-4"},te={class:"space-y-2"},se={class:"flex justify-between text-[10px] font-mono text-muted uppercase"},ae={class:"text-accent"},oe={class:"p-4 bg-background/50 border border-dashed border-border rounded-sm space-y-2"},re={class:"text-[10px] text-muted font-mono leading-relaxed"},ne={class:"flex items-center gap-2 bg-background p-1 border border-border rounded-sm"},le=["disabled"],ie={class:"relative z-10 flex items-center justify-center gap-2"},de={class:"p-4 bg-yellow-500/5 border border-yellow-500/20 rounded-sm flex gap-3"},ce={class:"flex-1 lg:col-span-8 flex flex-col min-h-0 h-full"},ue={class:"bg-background border border-border rounded-sm flex flex-col h-full shadow-inner"},pe={class:"p-3 border-b border-border bg-surface/50 flex items-center justify-between"},me={class:"flex-1 overflow-y-auto p-4 font-mono text-[11px] space-y-2 selection:bg-accent/30"},fe={key:0,class:"h-full flex items-center justify-center text-muted/30 uppercase tracking-widest italic"},ge={class:"text-muted/50 shrink-0"},ve={class:"space-y-1"},xe={key:0,class:"mr-1"},be={key:1,class:"mr-1"},he={key:2,class:"mr-1"},ye={key:0,class:"text-muted/60 pl-4 border-l border-border/50 text-[10px] leading-relaxed italic"},_e={class:"p-2 border-t border-border bg-surface/30 px-4 flex justify-between items-center"},we={class:"flex gap-4"},ke={class:"text-[9px] text-muted uppercase"},Se=D({__name:"Playground",setup(Te){const d=b(!1),v=b([]),m=b(5),c=b("sequential"),n=b([]),I=async()=>{try{const a=await k.get("/rooms");v.value=a.data.filter(t=>t.status==="online")}catch{o("error","SYSTEM","Failed to fetch resource nodes")}},o=(a,t,s,y)=>{const f={id:Math.random().toString(36).substring(7),timestamp:new Date().toLocaleTimeString(),type:a,message:`[${t}] ${s}`,details:y};n.value.unshift(f),n.value.length>50&&n.value.pop(),localStorage.setItem("playground_logs",JSON.stringify(n.value))},L=()=>{n.value=[],localStorage.removeItem("playground_logs")},O=async()=>{if(confirm("WARNING: This will delete ALL allocations. Continue?")){d.value=!0;try{await k.post("/allocations/reset"),o("info","SYSTEM","Database reset successful")}catch(a){o("error","SYSTEM","Reset failed",a.message)}finally{d.value=!1}}},T=async a=>{const t=v.value[Math.floor(Math.random()*v.value.length)],s=new Date,y=5+a*15+Math.floor(Math.random()*60);s.setMinutes(s.getMinutes()+y);const f=new Date(s);f.setHours(f.getHours()+1+Math.floor(Math.random()*2));try{const h={room_id:t.id,user_id:1,start_time:s.toISOString(),end_time:f.toISOString()};await k.post("/bookings",h),o("success",t.name,`Allocation approved for ${s.toLocaleTimeString()} - ${f.toLocaleTimeString()}`)}catch(h){const _=h.response?.data?.error||"Unknown error";h.response?.status===409||_.includes("conflict")?o("conflict",t.name,"Resource conflict detected",_):o("error",t.name,`Failed: ${_}`)}},A=async()=>{if(v.value.length===0){o("error","SYSTEM","Aborting: No resources found");return}if(d.value=!0,o("info","FLOOD",`Initiating ${c.value} batch of ${m.value} requests...`),c.value==="sequential")for(let a=0;a<m.value;a++)await T(a),await new Promise(t=>setTimeout(t,100));else{const a=Array.from({length:m.value},(t,s)=>T(s));await Promise.all(a)}o("info","FLOOD","Batch execution completed."),d.value=!1};return N(()=>{I();const a=localStorage.getItem("playground_logs");if(a)try{n.value=JSON.parse(a)}catch(t){console.error("Failed to parse logs",t)}o("info","SYSTEM","Playground engine initialized. REPL ready.")}),(a,t)=>(r(),l("div",Y,[e("div",H,[t[4]||(t[4]=e("div",{class:"space-y-1"},[e("h2",{class:"text-2xl font-bold text-primary tracking-tight"}," ALLOCRA_PLAYGROUND "),e("p",{class:"text-muted text-sm font-mono uppercase tracking-widest bg-accent/5 px-2 py-0.5 rounded-sm inline-block"}," Deterministic_Stress_Testing_Unit_v2 ")],-1)),e("div",J,[t[3]||(t[3]=e("div",{class:"text-right"},[e("p",{class:"text-[10px] font-mono text-muted uppercase"}," Engine_Status "),e("p",{class:"text-green-500 font-bold font-mono"},"NOMINAL")],-1)),e("div",X,[g(u(R),{class:"text-accent"})])])]),e("div",K,[e("div",Q,[e("div",W,[e("h3",Z,[g(u(C),{size:14}),t[5]||(t[5]=p(" Simulation_Parameters ",-1))]),e("div",ee,[e("div",te,[e("div",se,[t[6]||(t[6]=e("span",null,"Request_Flood_Level",-1)),e("span",ae,i(m.value)+" REQS",1)]),P(e("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),min:"1",max:"50",class:"w-full accent-accent bg-background h-1.5 rounded-full appearance-none border border-border"},null,512),[[z,m.value,void 0,{number:!0}]])]),e("div",oe,[e("p",re,[p(" > TARGET: "+i(v.value.length)+" NODES ACTIVE",1),t[7]||(t[7]=e("br",null,null,-1)),t[8]||(t[8]=p(" > STRATEGY: STOCHASTIC_TIME_SLOTS",-1)),t[9]||(t[9]=e("br",null,null,-1)),p(" > MODE: "+i(c.value.toUpperCase())+"_TRACE ",1)])]),e("div",ne,[e("button",{onClick:t[1]||(t[1]=s=>c.value="sequential"),class:w(["flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-sm transition-colors",c.value==="sequential"?"bg-accent text-white shadow-sm":"text-muted hover:text-primary"])}," Sequential ",2),e("button",{onClick:t[2]||(t[2]=s=>c.value="parallel"),class:w(["flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-sm transition-colors",c.value==="parallel"?"bg-accent text-white shadow-sm":"text-muted hover:text-primary"])}," Parallel ",2)])]),e("button",{onClick:A,disabled:d.value,class:"w-full relative group bg-accent hover:bg-accent-hover text-white text-xs font-bold uppercase tracking-[0.2em] py-4 rounded-sm transition-all disabled:opacity-50 overflow-hidden"},[t[10]||(t[10]=e("div",{class:"absolute inset-0 bg-white/10 -translate-x-full group-hover:translate-x-0 transition-transform duration-500"},null,-1)),e("span",ie,[d.value?(r(),M(u(C),{key:1,size:16,class:"animate-spin"})):(r(),M(u(G),{key:0,size:16})),p(" "+i(d.value?"EXECUTING_STORM...":"INITIATE_FLOOD"),1)])],8,le)]),e("div",de,[g(u(B),{size:16,class:"text-yellow-500 shrink-0 mt-0.5"}),t[11]||(t[11]=e("p",{class:"text-[10px] text-muted leading-relaxed"}," CAUTION: FLOOD_MODE generates real database entries. High volume may affect timeline visualization performance. ",-1))]),e("button",{onClick:O,class:"w-full border border-red-500/30 hover:bg-red-500/10 text-red-500 text-xs font-bold uppercase tracking-widest py-3 rounded-sm transition-colors flex items-center justify-center gap-2"},[g(u(E),{size:14}),t[12]||(t[12]=p(" PURGE_DATABASE ",-1))])]),e("div",ce,[e("div",ue,[e("div",pe,[t[13]||(t[13]=F('<div class="flex items-center gap-2" data-v-98a3e414><div class="flex gap-1" data-v-98a3e414><div class="w-2.5 h-2.5 rounded-full bg-red-500/50" data-v-98a3e414></div><div class="w-2.5 h-2.5 rounded-full bg-yellow-500/50" data-v-98a3e414></div><div class="w-2.5 h-2.5 rounded-full bg-green-500/50" data-v-98a3e414></div></div><span class="text-[10px] font-mono font-bold text-muted ml-4 uppercase tracking-widest" data-v-98a3e414>Live_Engine_Tracer</span></div>',1)),e("button",{onClick:L,class:"text-muted hover:text-red-400 transition-colors",title:"Clear Logs"},[g(u(E),{size:14})])]),e("div",me,[n.value.length===0?(r(),l("div",fe," Awaiting_Input... ")):x("",!0),g($,{name:"log"},{default:j(()=>[(r(!0),l(U,null,V(n.value,s=>(r(),l("div",{key:s.id,class:"flex gap-3 group animate-in slide-in-from-left-1 duration-200"},[e("span",ge,i(s.timestamp),1),e("div",ve,[e("div",{class:w({"text-green-400":s.type==="success","text-red-400":s.type==="conflict","text-accent":s.type==="info","text-red-500 font-bold":s.type==="error"})},[s.type==="success"?(r(),l("span",xe,"[+]")):x("",!0),s.type==="conflict"?(r(),l("span",be,"[!]")):x("",!0),s.type==="error"?(r(),l("span",he,"[X]")):x("",!0),p(" "+i(s.message),1)],2),s.details?(r(),l("div",ye,i(s.details),1)):x("",!0)])]))),128))]),_:1})]),e("div",_e,[e("div",we,[e("span",ke,"Trace_Buffer: "+i(n.value.length)+"/50",1)]),t[14]||(t[14]=e("div",{class:"flex items-center gap-1.5 animate-pulse"},[e("div",{class:"w-1.5 h-1.5 rounded-full bg-accent"}),e("span",{class:"text-[9px] text-accent uppercase font-bold tracking-tighter"},"Engine_Listening")],-1))])])])])]))}}),Le=q(Se,[["__scopeId","data-v-98a3e414"]]);export{Le as default};
