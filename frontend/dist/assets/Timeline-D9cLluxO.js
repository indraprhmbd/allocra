import{c as D,d as M,H as C,g as E,a,b as e,F as p,i as f,u as x,h as $,m as b,o as n,t as m,l as z,n as w,_ as I,j as v,x as H,y as R}from"./index-CE_jnT5K.js";import{a as k}from"./api-Ca2zvfGq.js";var V=D("outline","calendar-event","CalendarEvent",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2l0 -12",key:"svg-0"}],["path",{d:"M16 3l0 4",key:"svg-1"}],["path",{d:"M8 3l0 4",key:"svg-2"}],["path",{d:"M4 11l16 0",key:"svg-3"}],["path",{d:"M8 15h2v2h-2l0 -2",key:"svg-4"}]]);var j=D("outline","filter","Filter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227",key:"svg-0"}]]);const F={class:"flex flex-col h-full bg-background select-none"},L={class:"flex border-b border-border bg-surface sticky top-0 z-10"},O={class:"flex-1 flex overflow-x-auto no-scrollbar"},A={class:"flex-1 overflow-y-auto overflow-x-hidden"},B={class:"w-48 border-r border-border p-4 font-mono text-xs text-primary bg-surface/30 flex items-center"},N={class:"flex-1 relative h-16 flex"},G=M({__name:"TimelineGrid",props:{date:{}},setup(g){const l=g,h=Array.from({length:24},(c,d)=>`${d}:00`),s=b([]),i=b(!1),_=async()=>{i.value=!0;try{const[c,d]=await Promise.all([k.get("/rooms"),k.get("/bookings/all")]);s.value=c.data.map(o=>{const r=d.data.filter(t=>{const u=new Date(t.start_time).toISOString().split("T")[0];return t.room_id===o.id&&u===l.date}).map(t=>{const u=new Date(t.start_time),y=new Date(t.end_time),S=u.getHours()+u.getMinutes()/60,T=y.getHours()+y.getMinutes()/60;return{start:S,end:T,color:t.status==="approved"?"bg-accent":t.status==="rejected"?"border-2 border-red-500 bg-red-500/10":"bg-surface border border-border",label:`AL-${t.id}`,conflict:t.status==="rejected"}});return{name:o.name,allocations:r}})}catch{console.error("Timeline data fetch error")}finally{i.value=!1}};return C(()=>l.date,()=>{_()}),E(()=>{_()}),(c,d)=>(n(),a("div",F,[e("div",L,[d[0]||(d[0]=e("div",{class:"w-48 border-r border-border p-4 text-[10px] font-bold text-muted uppercase tracking-widest leading-none flex items-center"}," RESOURCE_ID ",-1)),e("div",O,[(n(!0),a(p,null,f(x(h),o=>(n(),a("div",{key:o,class:"flex-none w-20 border-r border-border/50 p-3 text-[10px] font-mono text-muted text-center"},m(o),1))),128))])]),e("div",A,[(n(!0),a(p,null,f(s.value,o=>(n(),a("div",{key:o.name,class:"flex border-b border-border group hover:bg-surface/50 transition-colors"},[e("div",B,m(o.name),1),e("div",N,[(n(),a(p,null,f(24,r=>e("div",{key:r,class:"flex-none w-20 border-r border-border/30 h-full"})),64)),(n(!0),a(p,null,f(o.allocations,(r,t)=>(n(),a("div",{key:t,class:w(["absolute top-2 bottom-2 rounded-sm flex items-center justify-center p-2 overflow-hidden shadow-lg transition-transform hover:scale-[1.02] cursor-pointer",r.color]),style:z({left:r.start*80+"px",width:(r.end-r.start)*80+"px"})},[e("span",{class:w(["text-[9px] font-bold font-mono tracking-tighter truncate",r.conflict?"text-red-500":"text-white"])},m(r.label),3)],6))),128))])]))),128))]),d[1]||(d[1]=$('<div class="p-4 border-t border-border bg-surface flex items-center gap-6 text-[10px] font-mono text-muted uppercase" data-v-2a116778><div class="flex items-center gap-2" data-v-2a116778><span class="w-2 h-2 bg-accent rounded-sm" data-v-2a116778></span> ALLOCATED </div><div class="flex items-center gap-2" data-v-2a116778><span class="w-2 h-2 border border-red-500 bg-red-500/20 rounded-sm" data-v-2a116778></span> CONFLICT </div><div class="flex items-center gap-2" data-v-2a116778><span class="w-2 h-2 bg-neutral-800 rounded-sm" data-v-2a116778></span> RESERVED </div></div>',1))]))}}),U=I(G,[["__scopeId","data-v-2a116778"]]),P={class:"space-y-6 md:space-y-8 h-full flex flex-col"},q={class:"flex flex-col md:flex-row md:items-end justify-between gap-4"},J={class:"flex items-center gap-3 self-start md:self-auto"},K={class:"bg-surface border border-border rounded-sm px-3 py-1.5 flex items-center gap-2 text-xs font-mono text-muted relative"},Q={class:"border border-border p-2 rounded-sm text-muted hover:text-primary transition-colors"},W={class:"flex-1 bg-surface border border-border rounded-sm overflow-hidden min-h-[500px] flex flex-col"},X={class:"flex-1 overflow-x-auto overflow-y-hidden"},Y={class:"min-w-[800px] h-full"},te=M({__name:"Timeline",setup(g){const l=b(new Date().toISOString().split("T")[0]||"");return(h,s)=>(n(),a("div",P,[e("div",q,[s[1]||(s[1]=e("div",null,[e("h2",{class:"text-2xl font-bold text-primary tracking-tight"}," Temporal Grid "),e("p",{class:"text-muted text-sm mt-1"}," Holistic visualization of engine scheduling and temporal constraints. ")],-1)),e("div",J,[e("div",K,[v(x(V),{size:14}),H(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>l.value=i),type:"date",class:"bg-transparent border-none outline-none text-muted focus:text-primary transition-colors cursor-pointer"},null,512),[[R,l.value]])]),e("button",Q,[v(x(j),{size:18})])])]),e("div",W,[e("div",X,[e("div",Y,[v(U,{date:l.value},null,8,["date"])])])]),s[2]||(s[2]=e("p",{class:"text-xs text-muted text-center md:hidden pb-4"}," Swipe horizontally to view full timeline ",-1))]))}});export{te as default};
